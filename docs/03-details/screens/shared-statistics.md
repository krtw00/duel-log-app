---
depends_on: [../ui.md]
tags: [screens, ui, shared-statistics]
ai_summary: "共有統計画面の機能仕様（ダッシュボード+統計の2ビュー、読取専用）"
---

# 共有統計

> Status: Active
> 最終更新: 2026-01-24

## 画面概要

| 項目 | 内容 |
|------|------|
| パス | `/shared-stats/:share_id` |
| 目的 | 共有トークンでダッシュボード・統計の2ビューを読取専用で表示する |
| アクセス権 | 不要（有効なshare_id必須） |
| レスポンシブ | 統計ページと同等 |

---

## ビュー構成

AppBar内のトグルボタンで2つのビューを切替える。初期表示はダッシュボードビューである。

### ダッシュボードビュー

| データ項目 | 表示形式 | データソース |
|-----------|---------|-------------|
| 表示月 | 「YYYY年M月」形式 | share設定 |
| 統計カード（4枚） | 総対戦数 / 勝率 / 先攻率 / コイントス勝率 | 共有データ集計 |
| 連勝・連敗バッジ | 種類 + 数値（色分け） | 共有データ集計 |
| 対戦履歴テーブル | 日時 / 結果 / 自デッキ / 相手デッキ / 先後 | 共有データ |

操作ボタン（編集・削除）は表示しない。読取専用である。

### 統計ビュー

| データ項目 | 表示形式 | データソース |
|-----------|---------|-------------|
| デッキ別勝率テーブル | デッキ名 / 勝率 / 勝敗数 | 共有データ集計 |
| デッキ使用分布 | 円グラフ | 共有データ集計 |
| 相性マトリクス | 勝率%セル（色分け） | 共有データ集計 |
| 推移チャート | X=時系列, Y=モード値 | 共有データ集計 |

---

## ユーザー操作

| 操作 | トリガー | 結果 |
|------|---------|------|
| ビュー切替 | ダッシュボード/統計ボタン | 表示モードを切替 |
| テーマ切替 | 太陽/月アイコン | ダーク/ライトテーマ切替 |
| CSVエクスポート | エクスポートボタン | 共有データのCSVダウンロード |
| ゲームモード切替 | タブ選択 | 統計をフィルタ |
| 期間フィルタ | フィルタコントロール | 表示範囲を変更 |
| ホームへ | ロゴクリック | `/`へ遷移 |

---

## レイアウト

独自AppBar（通常のナビゲーションを非表示）:

| 要素 | 内容 |
|------|------|
| 左 | ロゴ + 「Duel Log Shared Statistics」 |
| 中 | ビュー切替ボタン群 |
| 右 | テーマ切替アイコン |

---

## 状態

| 状態 | 条件 | 表示内容 |
|------|------|---------|
| ローディング | データ取得中 | スピナー |
| 無効トークン | share_idが無効 | エラーメッセージ |
| エラー | API通信失敗 | トースト通知 |

---

## 関連ドキュメント

- [../ui.md](../ui.md) - 画面一覧・共通パターン
- [../sharing.md](../sharing.md) - 共有機能の詳細仕様
- [dashboard.md](./dashboard.md) - ダッシュボード画面（認証版）
- [statistics.md](./statistics.md) - 統計画面（認証版）
