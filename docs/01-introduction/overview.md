# Duel Log App 概要

**TCG対戦履歴記録・分析アプリケーション**

## プロジェクト概要

Duel Log Appは、トレーディングカードゲーム（TCG）の対戦履歴を記録・分析するWebアプリケーションです。

### Core Value

1. **対戦履歴の可視化** - 勝敗、デッキ、対戦相手を記録し、統計情報として可視化
2. **デッキ分析** - デッキごとの勝率、相性表、トレンド分析
3. **配信者サポート** - OBSオーバーレイ、配信者モード（プライバシー保護）
4. **データポータビリティ** - CSVインポート/エクスポート、統計情報共有URL

```
┌─────────────────────────────────────────────────────────────────┐
│  Duel Log App                                                   │
│                                                                 │
│  ユーザー ───→ 対戦記録 ───→ 統計分析 ───→ 勝率向上           │
│                                                                 │
│  配信者 ─────→ OBSオーバーレイ ───→ 視聴者への情報提供         │
│                                                                 │
│  チーム ─────→ 統計共有URL ───→ メタゲーム分析                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 技術スタック

### バックエンド

| 技術 | 用途 |
|------|------|
| Python 3.11+ | 言語 |
| FastAPI | Webフレームワーク |
| SQLAlchemy 2.0 | ORM |
| Alembic | マイグレーション |
| PostgreSQL | データベース |

### フロントエンド

| 技術 | 用途 |
|------|------|
| TypeScript | 言語 |
| Vue 3 (Composition API) | UIフレームワーク |
| Vuetify 3 | UIコンポーネント |
| Pinia | 状態管理 |
| Vite | ビルドツール |

### インフラ・サービス

| 技術 | 用途 |
|------|------|
| Supabase | 認証、データベースホスティング |
| Vercel | フロントエンドホスティング |
| Render | バックエンドホスティング |
| GitHub Actions | CI/CD |

---

## 主要機能

### 実装済み機能

| 機能 | 説明 |
|------|------|
| **対戦記録** | 勝敗、デッキ、対戦相手、ゲームモード、ターン順を記録 |
| **デッキ管理** | 自分のデッキと対戦相手のデッキを管理 |
| **統計情報** | 勝率、先攻/後攻勝率、コイントス勝率、期間別統計 |
| **デッキ相性表** | デッキ間の勝率マトリックス |
| **OBSオーバーレイ** | 配信用のリアルタイム統計表示 |
| **統計共有** | URLベースの統計情報公開 |
| **配信者モード** | プライバシー保護（個人情報マスク） |
| **CSVインポート/エクスポート** | データのバックアップ・復元 |
| **管理者画面** | ユーザー管理（部分実装） |

### 計画中機能

| 機能 | 説明 | 設計ドキュメント |
|------|------|-----------------|
| 初手カード勝率分析 | 初手のカードと勝率の相関分析 | @../05-features/opening-hand-analysis-design.md |
| フィードバック機能 | アプリ内フィードバック送信 | @../05-features/feedback-and-contact.md |
| 多言語対応 | 日本語/英語切り替え | @../05-features/internationalization.md |
| モバイル対応 | レスポンシブUI強化 | @../05-features/mobile-support.md |

---

## アーキテクチャ概要

```
┌─────────────────────────────────────────────────────────────────┐
│  Frontend (Vercel)                                              │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │  Vue 3 + Vuetify 3 + Pinia                               │   │
│  │  - Views: Dashboard, Decks, Statistics, Profile          │   │
│  │  - Components: 機能別に整理                              │   │
│  │  - Services: API Client (Axios)                          │   │
│  └──────────────────────────────────────────────────────────┘   │
│                           │                                      │
│                           ▼ REST API                             │
├─────────────────────────────────────────────────────────────────┤
│  Backend (Render)                                               │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │  FastAPI + SQLAlchemy                                    │   │
│  │  - Routers: auth, users, decks, duels, statistics        │   │
│  │  - Services: ビジネスロジック                            │   │
│  │  - Models: SQLAlchemyモデル                              │   │
│  └──────────────────────────────────────────────────────────┘   │
│                           │                                      │
│                           ▼                                      │
├─────────────────────────────────────────────────────────────────┤
│  Database (Supabase / Neon)                                     │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │  PostgreSQL                                              │   │
│  │  - users, decks, duels, shared_statistics                │   │
│  └──────────────────────────────────────────────────────────┘   │
│                                                                 │
│  Authentication (Supabase Auth)                                 │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │  JWT Token (HttpOnly Cookie)                             │   │
│  │  - OAuth: Google, Discord, GitHub                        │   │
│  └──────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

---

## クイックスタート

### 前提条件

- Node.js 20+
- Python 3.11+
- Docker（Supabase用）

### セットアップ

```bash
# リポジトリクローン
git clone https://github.com/your-org/duel-log-app.git
cd duel-log-app

# 開発環境起動（Supabase + Backend + Frontend）
./scripts/dev.sh
```

### アクセス

| サービス | URL |
|---------|-----|
| フロントエンド | http://localhost:5173 |
| バックエンドAPI | http://127.0.0.1:8000 |
| Supabase Studio | http://127.0.0.1:55323 |

---

## 関連ドキュメント

- @../02-architecture/backend-architecture.md - バックエンド詳細
- @../02-architecture/frontend-architecture.md - フロントエンド詳細
- @../04-data/data-model.md - データベーススキーマ
- @../08-development/local-development.md - 開発環境セットアップ

---

## 次に読むべきドキュメント

- 開発者: @../08-development/local-development.md
- アーキテクチャ詳細: @../02-architecture/backend-architecture.md
