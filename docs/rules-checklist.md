# コーディング規約 — チェックリスト

本チェックリストは、PR作成前・マージ前に確認すべき項目をまとめたものです。開発者・レビュアー双方で活用してください。

---

## フォーマット・リンティング

- [ ] **バックエンド (Python)**
  - `black .` でフォーマット済み？
  - `ruff check . --fix` でリンティング通過？
  - Docstring (Google形式) は記載済み？

- [ ] **フロントエンド (TypeScript / Vue)**
  - `npm run format` でPrettier実行済み？
  - `npm run lint` でESLint通過？
  - JSDocコメントは記載済み？

- [ ] **共通**
  - Pre-commit hooks を実行 (`pre-commit run --all-files`)?
  - コミットメッセージは Conventional Commits 準拠？

---

## 命名規則

- [ ] **バックエンド**
  - 関数・変数・モジュール: `snake_case` で統一？
  - クラス: `PascalCase` で統一？
  - 定数: `UPPER_SNAKE_CASE` で統一？

- [ ] **フロントエンド**
  - ファイル名・関数・変数: `snake_case` で統一？
  - コンポーネント: `PascalCase.vue`？
  - 型・インターフェース: `PascalCase` で統一？

---

## コード品質

- [ ] **例外処理**
  - 広い `except Exception` はない？（バックエンド）
  - API呼び出しエラーはインターセプターで処理？（フロントエンド）
  - ユーザー向けのエラーメッセージは分かりやすい？

- [ ] **テスト**
  - 新機能に対応するテストコード追加済み？
  - テスト関数名は `test_*` で統一？
  - テストカバレッジは目標値 (80%+) を達成？

- [ ] **DRY・KISS原則**
  - 同じロジックの重複がない？
  - 複雑すぎる設計・実装になっていない？
  - 実装されていない機能の予約コードはない？

- [ ] **パフォーマンス**
  - N+1クエリの問題がない？（バックエンド）
  - 不要なAPI呼び出しやレンダリングはない？（フロントエンド）
  - ループ内での重い処理はない？

---

## ドキュメント

- [ ] **関数・クラスのコメント**
  - Docstring/JSDoc は記載済み？
  - 引数・戻り値・例外は明記？

- [ ] **複雑なロジック**
  - 「なぜ」このコードが必要なのか説明コメント付き？

- [ ] **API・DB変更**
  - APIエンドポイント追加時: `docs/api-reference.md` 更新済み？
  - DBスキーマ変更時: `docs/db-schema.md` 更新済み？
  - Alembicマイグレーション作成済み？

---

## セキュリティ

- [ ] **認証・認可**
  - ユーザーIDは常にDB検証されている？
  - 公開データと個人データの境界は明確？

- [ ] **データ入力**
  - SQLインジェクション対策: SQLAlchemy ORM + パラメータバインド？
  - XSS対策: 動的コンテンツはエスケープ済み？
  - バリデーション: Pydantic / 型チェックで実施？

- [ ] **依存関係**
  - セキュリティアラートはない？
  - 脆弱な依存関係を使用していない？

---

## Git・PR運用

- [ ] **ブランチ・コミット**
  - ブランチ名は `type/description` 形式？
  - コミットメッセージは Conventional Commits (`feat(scope): ...`)?
  - コミット履歴は一貫性・論理性がある？（Squashすべき？）

- [ ] **PR内容**
  - PR説明は明確・簡潔？
  - 関連するIssue番号は記載？
  - 不要な変更（自動フォーマットなど）は含まれていない？
  - サイズは適切？（大きすぎるPRは分割を検討）

- [ ] **CI/テスト**
  - GitHub Actions / CI が全て通過？
  - ローカルテスト (`pytest`, `npm run test`) 通過確認？
  - カバレッジレポートは確認済み？

---

## レビュー指摘項目

以下の点でレビュアーからの指摘を受けやすいため、事前チェック推奨：

- [ ] ハードコード化された値 → 定数 / 環境変数化
- [ ] 広い例外処理 → 具体的な例外型の指定
- [ ] 外部APIの呼び出しにタイムアウト設定
- [ ] ページネーション・フィルタリング対応（大量データ想定）
- [ ] モバイル対応・レスポンシブデザイン（フロントエンド）
- [ ] ダークモード対応（テーマの統一性確認）

---

## マージ前の最終確認

- [ ] 全チェックリスト項目を確認完了
- [ ] レビュアーのコメントに返信済み
- [ ] ブランチは最新の `develop` と同期？
- [ ] コンフリクト解決済み？
- [ ] マージコミットメッセージは適切？

✅ **すべてOKなら、マージ実行！**
