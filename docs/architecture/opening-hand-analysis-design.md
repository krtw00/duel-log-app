# åˆæ‰‹ã‚«ãƒ¼ãƒ‰å‹ç‡è§£ææ©Ÿèƒ½è¨­è¨ˆ

## æ¦‚è¦

ãƒ‡ãƒƒã‚­ã«å«ã¾ã‚Œã‚‹ã‚«ãƒ¼ãƒ‰ã‚’ç®¡ç†ã—ã€å¯¾æˆ¦æ™‚ã®åˆæ‰‹ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’è¨˜éŒ²ã™ã‚‹ã“ã¨ã§ã€ç‰¹å®šã®ã‚«ãƒ¼ãƒ‰ã‚’åˆæ‰‹ã§å¼•ã„ãŸéš›ã®å‹ç‡ã‚’åˆ†æã™ã‚‹æ©Ÿèƒ½ã®è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€‚

## ç›®çš„

- åˆæ‰‹ã«ç‰¹å®šã®ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã„ãŸéš›ã®å‹ç‡å‚¾å‘ã‚’å¯è¦–åŒ–
- å…ˆæ”»/å¾Œæ”»åˆ¥ã®åˆæ‰‹ã‚«ãƒ¼ãƒ‰å‹ç‡åˆ†æ
- ç›¸æ‰‹ãƒ†ãƒ¼ãƒï¼ˆãƒ‡ãƒƒã‚­ï¼‰ã¨ã®ç›¸æ€§ã«ãŠã‘ã‚‹åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã®å½±éŸ¿ã‚’åˆ†æ
- ãƒ‡ãƒƒã‚­æ§‹ç¯‰ã®æœ€é©åŒ–ã«å½¹ç«‹ã¤ãƒ‡ãƒ¼ã‚¿æä¾›

## è¨­è¨ˆæ–¹é‡

### ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã«ã‚ˆã‚‹ON/OFF

- **ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆæ©Ÿèƒ½ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã§ON/OFFå¯èƒ½**
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: OFFï¼ˆå¤šãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯ä¸è¦ãªãŸã‚ï¼‰
  - ONã«ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆç®¡ç†ãƒ»åˆæ‰‹ã‚«ãƒ¼ãƒ‰è¨˜éŒ²ãŒæœ‰åŠ¹åŒ–
  - OFFã®å ´åˆ: ãƒ‡ãƒƒã‚­è©³ç´°ç”»é¢ã®ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆUIã€å¯¾æˆ¦å…¥åŠ›ã®åˆæ‰‹ã‚«ãƒ¼ãƒ‰æ¬„ã¯éè¡¨ç¤º

### ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ç¢ºä¿

- **åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã¯ `deck_cards` ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®å¤–éƒ¨ã‚­ãƒ¼ã§ç®¡ç†**
  - ã‚«ãƒ¼ãƒ‰åã®æ–‡å­—åˆ—ä¿å­˜ã§ã¯ãªãã€`deck_cards.id` ã‚’å‚ç…§
  - å­˜åœ¨ã—ãªã„ã‚«ãƒ¼ãƒ‰ã¯é¸æŠä¸å¯ï¼ˆãƒªã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã‹ã‚‰ã®é¸æŠã®ã¿ï¼‰

- **è¡¨ç¤ºæ¡ä»¶ï¼ˆæ©Ÿèƒ½ONæ™‚ï¼‰**
  - é¸æŠã—ãŸãƒ‡ãƒƒã‚­ã«ã‚«ãƒ¼ãƒ‰ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚Œã°åˆæ‰‹ã‚«ãƒ¼ãƒ‰é¸æŠæ¬„ã‚’è¡¨ç¤º
  - ã‚«ãƒ¼ãƒ‰ãŒæœªç™»éŒ²ãªã‚‰åˆæ‰‹ã‚«ãƒ¼ãƒ‰é¸æŠæ¬„ã¯éè¡¨ç¤ºï¼ˆæ¡ˆå†…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ï¼‰

## æ©Ÿèƒ½è¦ä»¶

### 0. ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆæ©Ÿèƒ½ã®ON/OFFè¨­å®š

#### 0.1 è¨­å®šé …ç›®

**è¨­å®šå ´æ‰€:** ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šç”»é¢

**è¨­å®šé …ç›®:**
- ã€Œãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆæ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€ãƒˆã‚°ãƒ«ã‚¹ã‚¤ãƒƒãƒ
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: OFF

**å‹•ä½œ:**
| è¨­å®š | ãƒ‡ãƒƒã‚­è©³ç´°ç”»é¢ | å¯¾æˆ¦å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  | çµ±è¨ˆç”»é¢ |
|:---|:---|:---|:---|
| OFF | ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆUIéè¡¨ç¤º | åˆæ‰‹ã‚«ãƒ¼ãƒ‰æ¬„éè¡¨ç¤º | åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã‚¿ãƒ–éè¡¨ç¤º |
| ON | ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆUIè¡¨ç¤º | åˆæ‰‹ã‚«ãƒ¼ãƒ‰æ¬„è¡¨ç¤ºï¼ˆâ€»ï¼‰ | åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã‚¿ãƒ–è¡¨ç¤º |

â€» é¸æŠãƒ‡ãƒƒã‚­ã«ã‚«ãƒ¼ãƒ‰ç™»éŒ²ãŒã‚ã‚‹å ´åˆã®ã¿

---

### 1. ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆï¼ˆã‚«ãƒ¼ãƒ‰å˜ä½ï¼‰ç®¡ç†æ©Ÿèƒ½

#### 1.1 ãƒ‡ãƒƒã‚­ã¨ã®ç´ã¥ã‘

- ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆã¯æ—¢å­˜ã®è‡ªãƒ‡ãƒƒã‚­ï¼ˆ`decks`ãƒ†ãƒ¼ãƒ–ãƒ«ã€`is_opponent=False`ï¼‰ã«ç´ã¥ã
- å„ãƒ‡ãƒƒã‚­ã¯0ã€œNæšã®ã‚«ãƒ¼ãƒ‰ã‚’æŒã¦ã‚‹
- ã‚«ãƒ¼ãƒ‰ãŒ1æšã‚‚ç™»éŒ²ã•ã‚Œã¦ã„ãªã„ãƒ‡ãƒƒã‚­ã¯ã€Œãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆæœªè¨­å®šã€ã¨ã—ã¦æ‰±ã†

#### 1.2 ã‚«ãƒ¼ãƒ‰ç®¡ç†

**ã‚«ãƒ¼ãƒ‰ç™»éŒ²:**
- ãƒ‡ãƒƒã‚­è©³ç´°ç”»é¢ã‹ã‚‰ã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ 
- ã‚«ãƒ¼ãƒ‰åï¼ˆãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã€ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆå¯¾å¿œäºˆå®šï¼‰
- æšæ•°ï¼ˆ1ã€œ3æšã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ1æšï¼‰
- ã‚«ãƒ¼ãƒ‰ç¨®åˆ¥ï¼ˆãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼/é­”æ³•/ç½ ï¼‰- ä»»æ„

**ã‚«ãƒ¼ãƒ‰ä¸€è¦§è¡¨ç¤º:**
- ãƒ‡ãƒƒã‚­ã«ç™»éŒ²ã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ä¸€è¦§
- æšæ•°è¡¨ç¤º
- ä¸¦ã³æ›¿ãˆï¼ˆåå‰é †ã€ç¨®åˆ¥é †ã€æšæ•°é †ï¼‰
- æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

**ã‚«ãƒ¼ãƒ‰ç·¨é›†/å‰Šé™¤:**
- ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†å¯¾å¿œ
- å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°

**åˆ¶ç´„:**
- 1ãƒ‡ãƒƒã‚­ã‚ãŸã‚Šã®æœ€å¤§ã‚«ãƒ¼ãƒ‰æ•°: 60æšï¼ˆãƒ¡ã‚¤ãƒ³40-60 + ã‚¨ã‚¯ã‚¹ãƒˆãƒ©15ï¼‰
- åŒåã‚«ãƒ¼ãƒ‰ã¯1ã‚¨ãƒ³ãƒˆãƒªã§æšæ•°ç®¡ç†

---

### 2. åˆæ‰‹ã‚«ãƒ¼ãƒ‰è¨˜éŒ²æ©Ÿèƒ½

#### 2.1 å¯¾æˆ¦å…¥åŠ›æ™‚ã®åˆæ‰‹ã‚«ãƒ¼ãƒ‰è¨­å®š

**è¡¨ç¤ºæ¡ä»¶:**
- é¸æŠã—ãŸè‡ªãƒ‡ãƒƒã‚­ã«1æšä»¥ä¸Šã®ã‚«ãƒ¼ãƒ‰ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿è¡¨ç¤º
- ã‚«ãƒ¼ãƒ‰æœªç™»éŒ²ã®ãƒ‡ãƒƒã‚­ã‚’é¸æŠã—ãŸå ´åˆã¯åˆæ‰‹ã‚«ãƒ¼ãƒ‰æ¬„è‡ªä½“ã‚’éè¡¨ç¤º

**å…¥åŠ›æ–¹æ³•:**
- **ãƒªã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰** ã‹ã‚‰é¸æŠ
- é¸æŠè‚¢ã¯é¸æŠä¸­ã®ãƒ‡ãƒƒã‚­ã«ç™»éŒ²ã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã®ã¿
- æœ€å¤§5æšã¾ã§é¸æŠå¯èƒ½
- ä»»æ„å…¥åŠ›ï¼ˆé¸æŠã—ãªãã¦ã‚‚OKï¼‰

**UIä»•æ§˜:**
- ãƒªã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹å½¢å¼ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ä»˜ããƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ï¼‰
- é¸æŠæ¸ˆã¿ã‚«ãƒ¼ãƒ‰ã¯ãƒãƒƒãƒ—å½¢å¼ã§è¡¨ç¤º
- å„ãƒãƒƒãƒ—ã«å‰Šé™¤ãƒœã‚¿ãƒ³
- ã€Œã‚¯ãƒªã‚¢ã€ãƒœã‚¿ãƒ³ã§å…¨é¸æŠè§£é™¤

#### 2.2 åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã®ä¿å­˜

**ä¿å­˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°:**
- å¯¾æˆ¦è¨˜éŒ²ä¿å­˜æ™‚ã«åŒæ™‚ä¿å­˜

**ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§:**
- `opening_hand_cards` ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ `deck_cards.id` ã‚’å¤–éƒ¨ã‚­ãƒ¼ã§å‚ç…§
- ã‚«ãƒ¼ãƒ‰ãŒå‰Šé™¤ã•ã‚ŒãŸå ´åˆ: é–¢é€£ã™ã‚‹åˆæ‰‹ã‚«ãƒ¼ãƒ‰è¨˜éŒ²ã‚‚å‰Šé™¤ï¼ˆCASCADEï¼‰
- ãƒ‡ãƒƒã‚­ãŒå‰Šé™¤ã•ã‚ŒãŸå ´åˆ: é–¢é€£ã™ã‚‹ã‚«ãƒ¼ãƒ‰â†’åˆæ‰‹ã‚«ãƒ¼ãƒ‰è¨˜éŒ²ã‚‚å‰Šé™¤ï¼ˆCASCADEï¼‰

**æ³¨æ„äº‹é …:**
- ã‚«ãƒ¼ãƒ‰å‰Šé™¤æ™‚ã¯éå»ã®çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã«å½±éŸ¿ã™ã‚‹ãŸã‚ã€ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§è­¦å‘Šã‚’è¡¨ç¤º
- ã€Œã“ã®ã‚«ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã™ã‚‹ã¨ã€é–¢é€£ã™ã‚‹åˆæ‰‹ã‚«ãƒ¼ãƒ‰è¨˜éŒ²ï¼ˆXä»¶ï¼‰ã‚‚å‰Šé™¤ã•ã‚Œã¾ã™ã€

---

### 3. åˆæ‰‹ã‚«ãƒ¼ãƒ‰å‹ç‡åˆ†ææ©Ÿèƒ½

#### 3.1 ã‚«ãƒ¼ãƒ‰åˆ¥å‹ç‡çµ±è¨ˆ

**çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰é …ç›®:**

1. **ã‚«ãƒ¼ãƒ‰åˆ¥ç·åˆå‹ç‡**
   - ã‚«ãƒ¼ãƒ‰å
   - å‡ºç¾å›æ•°ï¼ˆåˆæ‰‹ã«å¼•ã„ãŸå›æ•°ï¼‰
   - å‹åˆ©æ•°/æ•—åŒ—æ•°
   - å‹ç‡

2. **å…ˆæ”»/å¾Œæ”»åˆ¥å‹ç‡**
   - ã‚«ãƒ¼ãƒ‰å
   - å…ˆæ”»æ™‚å‹ç‡ï¼ˆå‹åˆ©/å¯¾æˆ¦æ•°ï¼‰
   - å¾Œæ”»æ™‚å‹ç‡ï¼ˆå‹åˆ©/å¯¾æˆ¦æ•°ï¼‰
   - å…ˆæ”»/å¾Œæ”»ã®å‹ç‡å·®

3. **ç›¸æ‰‹ãƒ†ãƒ¼ãƒåˆ¥å‹ç‡**
   - ã‚«ãƒ¼ãƒ‰å Ã— ç›¸æ‰‹ãƒ‡ãƒƒã‚­å
   - å‹ç‡
   - å¯¾æˆ¦æ•°

**ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¡ä»¶:**
- æœŸé–“ï¼ˆæœˆåˆ¥ã€æœŸé–“æŒ‡å®šï¼‰
- ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ï¼ˆRANK/RATE/EVENT/DCï¼‰
- ä½¿ç”¨ãƒ‡ãƒƒã‚­
- æœ€å°å‡ºç¾å›æ•°ï¼ˆä¿¡é ¼æ€§ã®ãŸã‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ3å›ä»¥ä¸Šï¼‰

#### 3.2 è¡¨ç¤ºå½¢å¼

**ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚«ãƒ¼ãƒ‰å      â”‚ å‡ºç¾â”‚ å…ˆæ”»å‹ç‡â”‚ å¾Œæ”»å‹ç‡â”‚ ç·åˆ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¢—æ®–ã™ã‚‹G     â”‚ 45  â”‚ 72.0%  â”‚ 58.3%  â”‚ 64.4%â”‚
â”‚ ç°æµã†ã‚‰ã‚‰    â”‚ 52  â”‚ 68.8%  â”‚ 61.5%  â”‚ 65.4%â”‚
â”‚ åŸå§‹ç”Ÿå‘½æ…‹ãƒ‹ãƒ“ãƒ«â”‚ 28  â”‚ 57.1%  â”‚ 71.4%  â”‚ 64.3%â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

**ã‚°ãƒ©ãƒ•è¡¨ç¤ºï¼ˆå°†æ¥çš„ãªæ‹¡å¼µï¼‰:**
- æ¨ªæ£’ã‚°ãƒ©ãƒ•: ã‚«ãƒ¼ãƒ‰åˆ¥å‹ç‡æ¯”è¼ƒ
- ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ: ç›¸æ‰‹ãƒ†ãƒ¼ãƒåˆ¥ç›¸æ€§

#### 3.3 è©³ç´°åˆ†æãƒ“ãƒ¥ãƒ¼

**ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯æ™‚:**
- ãã®ã‚«ãƒ¼ãƒ‰ã‚’å«ã‚€å¯¾æˆ¦å±¥æ­´ä¸€è¦§
- ç›¸æ‰‹ãƒ†ãƒ¼ãƒåˆ¥ã®å†…è¨³
- æ™‚ç³»åˆ—ã§ã®å‹ç‡æ¨ç§»

---

### 4. åˆå‹•ç‡è¨ˆç®—æ©Ÿèƒ½ï¼ˆã‚¢ãƒ‰ãƒãƒ³ã‚¹æ©Ÿèƒ½ï¼‰

ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆã«åŸºã¥ã„ã¦åˆå‹•ç‡ã‚’è¨ˆç®—ã™ã‚‹æ©Ÿèƒ½ã€‚

#### 4.1 åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆåˆå‹•ãƒªã‚¹ãƒˆï¼‰ã®æ¦‚å¿µ

éŠæˆ¯ç‹ã®åˆå‹•ã¯å˜ç´”ãªã€Œåˆå‹•æœ­ãƒ•ãƒ©ã‚°ã€ã§ã¯è¡¨ç¾ã§ããªã„ã€‚ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚‹ï¼š

**åˆå‹•ã®ç¨®é¡:**
- **1æšåˆå‹•**: ãã®ã‚«ãƒ¼ãƒ‰1æšã§å±•é–‹é–‹å§‹ã§ãã‚‹ï¼ˆä¾‹: ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰Aï¼‰
- **2æšåˆå‹•**: ç‰¹å®šã®2æšã®çµ„ã¿åˆã‚ã›ãŒå¿…è¦ï¼ˆä¾‹: ã‚«ãƒ¼ãƒ‰X + ã‚«ãƒ¼ãƒ‰Yï¼‰
- **3æšåˆå‹•**: ç‰¹å®šã®3æšã®çµ„ã¿åˆã‚ã›ãŒå¿…è¦ï¼ˆç¨€ï¼‰

**åˆå‹•æˆç«‹æ¡ä»¶:**
- è¤‡æ•°ã®åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç™»éŒ²
- ã„ãšã‚Œã‹1ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæˆç«‹ã™ã‚Œã°ã€Œåˆå‹•æˆåŠŸã€ï¼ˆORæ¡ä»¶ï¼‰

**ä¾‹: ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒƒã‚­ã®åˆå‹•ãƒªã‚¹ãƒˆ**
```
ãƒ‘ã‚¿ãƒ¼ãƒ³1: ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰Aï¼ˆ1æšåˆå‹•ï¼‰
ãƒ‘ã‚¿ãƒ¼ãƒ³2: ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰Bï¼ˆ1æšåˆå‹•ï¼‰
ãƒ‘ã‚¿ãƒ¼ãƒ³3: ã‚µãƒ¼ãƒé­”æ³•Cï¼ˆ1æšåˆå‹•ï¼‰
ãƒ‘ã‚¿ãƒ¼ãƒ³4: ã‚«ãƒ¼ãƒ‰X + ã‚«ãƒ¼ãƒ‰Yï¼ˆ2æšåˆå‹•ï¼‰

â†’ ã„ãšã‚Œã‹1ã¤ã§ã‚‚æˆç«‹ã™ã‚Œã°åˆå‹•æˆåŠŸ
```

#### 4.2 åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨­å®šUI

**è¨­å®šå ´æ‰€:** ãƒ‡ãƒƒã‚­è©³ç´°ç”»é¢ã®ã€Œåˆå‹•è¨­å®šã€ã‚¿ãƒ–

**å…¥åŠ›æ–¹æ³•ï¼ˆ3ã‚¹ãƒ­ãƒƒãƒˆæ–¹å¼ï¼‰:**
1. ã€Œãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. 3ã¤ã®ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ­ãƒƒãƒˆï¼ˆcard1/card2/card3ï¼‰ã‹ã‚‰é¸æŠ
3. card1ã®ã¿å¿…é ˆã€card2/card3ã¯ä»»æ„
4. ã€Œè¿½åŠ ã€ã§ç¢ºå®š

**UIè¨­è¨ˆ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³è¨­å®š                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [+ ãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ ]                              â”‚
â”‚                                             â”‚
â”‚ ç™»éŒ²æ¸ˆã¿ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆã„ãšã‚Œã‹æˆç«‹ã§åˆå‹•æˆåŠŸï¼‰     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚ â”‚ ç¨®åˆ¥ â”‚ ã‚«ãƒ¼ãƒ‰1      â”‚ ã‚«ãƒ¼ãƒ‰2  â”‚ ã‚«ãƒ¼ãƒ‰3â”‚    â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ â”‚ 1æš  â”‚ ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰AÃ—3    â”‚   -     â”‚   -   â”‚ ğŸ—‘ â”‚
â”‚ â”‚ 1æš  â”‚ ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰BÃ—3    â”‚   -     â”‚   -   â”‚ ğŸ—‘ â”‚
â”‚ â”‚ 1æš  â”‚ ã‚µãƒ¼ãƒé­”æ³•CÃ—3    â”‚   -     â”‚   -   â”‚ ğŸ—‘ â”‚
â”‚ â”‚ 2æš  â”‚ ã‚«ãƒ¼ãƒ‰XÃ—3        â”‚ ã‚«ãƒ¼ãƒ‰YÃ—2â”‚   -   â”‚ ğŸ—‘ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
â”‚                                             â”‚
â”‚ åˆå‹•æœ­åˆè¨ˆ: 12æšï¼ˆé‡è¤‡é™¤ãï¼‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆ3ã‚¹ãƒ­ãƒƒãƒˆå›ºå®šè¡¨ç¤ºï¼‰:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ‘ã‚¿ãƒ¼ãƒ³åï¼ˆä»»æ„ï¼‰: [___________________]     â”‚
â”‚                                             â”‚
â”‚ ã‚«ãƒ¼ãƒ‰1ï¼ˆå¿…é ˆï¼‰: [ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A â–¼]              â”‚
â”‚ ã‚«ãƒ¼ãƒ‰2ï¼ˆä»»æ„ï¼‰: [-- æœªé¸æŠ -- â–¼]             â”‚
â”‚ ã‚«ãƒ¼ãƒ‰3ï¼ˆä»»æ„ï¼‰: [-- æœªé¸æŠ -- â–¼]             â”‚
â”‚                                             â”‚
â”‚ â€» ã‚«ãƒ¼ãƒ‰1ã®ã¿ã§1æšåˆå‹•ã€2ã¾ã§é¸æŠã§2æšåˆå‹•    â”‚
â”‚                                             â”‚
â”‚ [ã‚­ãƒ£ãƒ³ã‚»ãƒ«] [è¿½åŠ ]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ¡ãƒªãƒƒãƒˆ:**
- ãƒ‘ã‚¿ãƒ¼ãƒ³ç¨®åˆ¥ã‚’äº‹å‰ã«é¸ã¶å¿…è¦ãŒãªã„
- ç›´æ„Ÿçš„ãªUIï¼ˆå¸¸ã«3ã‚¹ãƒ­ãƒƒãƒˆè¡¨ç¤ºï¼‰
- ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã§ä¸€è¦§æ€§ãŒé«˜ã„

#### 4.3 ç†è«–åˆå‹•ç‡ã®è¨ˆç®—

**è¨ˆç®—æ–¹æ³•: è¶…å¹¾ä½•åˆ†å¸ƒ + åŒ…é™¤åŸç†ï¼ˆæ¨å¥¨ï¼‰**

æ•°å­¦çš„ã«å³å¯†ãªåˆå‹•ç‡ã‚’è¨ˆç®—ã™ã‚‹ã€‚

**Step 1: å˜ä¸€ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æˆç«‹ç¢ºç‡**

1æšåˆå‹•ï¼ˆã‚«ãƒ¼ãƒ‰Aã‚’kæšæ¡ç”¨ã€ãƒ‡ãƒƒã‚­Næšã€æ‰‹æœ­næšï¼‰:
```
P(A) = 1 - C(N-k, n) / C(N, n)

ä¾‹: 40æšãƒ‡ãƒƒã‚­ã€3æšæ¡ç”¨ã€5æšãƒ‰ãƒ­ãƒ¼
P = 1 - C(37,5)/C(40,5) = 1 - 435897/658008 â‰ˆ 33.76%
```

2æšåˆå‹•ï¼ˆã‚«ãƒ¼ãƒ‰Aã‚’aæšã€ã‚«ãƒ¼ãƒ‰Bã‚’bæšæ¡ç”¨ï¼‰:
```
P(Aâˆ©B) = 1 - P(Aãªã—) - P(Bãªã—) + P(ä¸¡æ–¹ãªã—)
       = 1 - C(N-a,n)/C(N,n) - C(N-b,n)/C(N,n) + C(N-a-b,n)/C(N,n)

â€»ãŸã ã— a+b > N-n ã®å ´åˆã¯èª¿æ•´ãŒå¿…è¦
```

3æšåˆå‹•ï¼ˆã‚«ãƒ¼ãƒ‰A,B,Cã‚’ãã‚Œãã‚Œa,b,cæšæ¡ç”¨ï¼‰:
```
P(Aâˆ©Bâˆ©C) = åŒ…é™¤åŸç†ã§è¨ˆç®—
```

**Step 2: è¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆæˆï¼ˆåŒ…é™¤åŸç†ï¼‰**

ãƒ‘ã‚¿ãƒ¼ãƒ³ P1, P2, P3, ... ãŒã‚ã‚‹å ´åˆã€ã„ãšã‚Œã‹æˆç«‹ã®ç¢ºç‡:
```
P(P1 âˆª P2 âˆª P3 âˆª ...) =
    Î£ P(Pi)                    // å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¢ºç‡ã‚’è¶³ã™
  - Î£ P(Pi âˆ© Pj)               // 2ãƒ‘ã‚¿ãƒ¼ãƒ³åŒæ™‚æˆç«‹ã‚’å¼•ã
  + Î£ P(Pi âˆ© Pj âˆ© Pk)          // 3ãƒ‘ã‚¿ãƒ¼ãƒ³åŒæ™‚æˆç«‹ã‚’è¶³ã™
  - ...
```

**è¨ˆç®—ä¾‹: ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒƒã‚­**
```
ãƒ‘ã‚¿ãƒ¼ãƒ³:
  P1: ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A Ã—3ï¼ˆ1æšåˆå‹•ï¼‰
  P2: ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B Ã—3ï¼ˆ1æšåˆå‹•ï¼‰
  P3: ã‚µãƒ¼ãƒé­”æ³•C Ã—3ï¼ˆ1æšåˆå‹•ï¼‰
  P4: ã‚«ãƒ¼ãƒ‰XÃ—3 + ã‚«ãƒ¼ãƒ‰YÃ—2ï¼ˆ2æšåˆå‹•ï¼‰

å…ˆæ”»ï¼ˆ5æšãƒ‰ãƒ­ãƒ¼ï¼‰ã®å ´åˆ:
  P(P1) = 33.76%
  P(P2) = 33.76%
  P(P3) = 33.76%
  P(P4) = è¨ˆç®—å¼ã«ã‚ˆã‚‹

  P(P1âˆ©P2) = ä¸¡æ–¹å¼•ãç¢ºç‡
  ...ï¼ˆå…¨çµ„ã¿åˆã‚ã›ã‚’è¨ˆç®—ï¼‰

  åˆå‹•ç‡ = åŒ…é™¤åŸç†ã§åˆæˆ â‰ˆ 87.4%
```

**è¡¨ç¤ºä¾‹:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç†è«–åˆå‹•ç‡                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ‡ãƒƒã‚­æšæ•°: 40æš                              â”‚
â”‚ åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³: 4ç¨®                             â”‚
â”‚                                             â”‚
â”‚ å…ˆæ”»ï¼ˆ5æšãƒ‰ãƒ­ãƒ¼ï¼‰: 87.4%                      â”‚
â”‚ å¾Œæ”»ï¼ˆ6æšãƒ‰ãƒ­ãƒ¼ï¼‰: 91.2%                      â”‚
â”‚                                             â”‚
â”‚ ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥æˆç«‹ç‡:                             â”‚
â”‚  #1 ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A: 33.8%                        â”‚
â”‚  #2 ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B: 33.8%                        â”‚
â”‚  #3 ã‚µãƒ¼ãƒé­”æ³•C: 33.8%                        â”‚
â”‚  #4 ã‚«ãƒ¼ãƒ‰X+ã‚«ãƒ¼ãƒ‰Y: 8.2%                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.4 å®Ÿè³ªåˆå‹•ç‡

å®Ÿéš›ã®å¯¾æˆ¦ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãåˆå‹•ç‡ã‚’è¨ˆç®—ã€‚

**åˆ¤å®šæ–¹æ³•:**
- è¨˜éŒ²ã•ã‚ŒãŸåˆæ‰‹ã‚«ãƒ¼ãƒ‰ã‚’å–å¾—
- ç™»éŒ²æ¸ˆã¿åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã„ãšã‚Œã‹ãŒæˆç«‹ã™ã‚‹ã‹åˆ¤å®š
- æˆç«‹ã—ãŸå¯¾æˆ¦æ•° / åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã‚’è¨˜éŒ²ã—ãŸç·å¯¾æˆ¦æ•°

**è¡¨ç¤ºé …ç›®:**
- å®Ÿè³ªåˆå‹•ç‡ï¼ˆå…ˆæ”»/å¾Œæ”»åˆ¥ï¼‰
- ç†è«–å€¤ã¨ã®å·®ç•°
- åˆå‹•æˆåŠŸæ™‚ã®å‹ç‡ vs åˆå‹•å¤±æ•—æ™‚ã®å‹ç‡
- ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ã®æˆç«‹ç‡ã¨å‹ç‡

**è¡¨ç¤ºä¾‹:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®Ÿè³ªåˆå‹•ç‡ï¼ˆç›´è¿‘100æˆ¦ï¼‰                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚ ç†è«–å€¤ â”‚ å®Ÿè³ª  â”‚ å·®ç•°   â”‚ å‹ç‡  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”‚
â”‚ å…ˆæ”»ï¼ˆ5æšï¼‰â”‚ 87.4% â”‚ 84.0%â”‚ -3.4% â”‚ 72.3%â”‚
â”‚ å¾Œæ”»ï¼ˆ6æšï¼‰â”‚ 91.2% â”‚ 88.5%â”‚ -2.7% â”‚ 58.1%â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆå‹•æˆåŠŸæ™‚å‹ç‡: 68.2%                         â”‚
â”‚ åˆå‹•å¤±æ•—æ™‚å‹ç‡: 41.7%                         â”‚
â”‚ åˆå‹•ã®å‹ç‡è²¢çŒ®: +26.5%                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥åˆ†æ:                               â”‚
â”‚  #1 ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A: 35.2% (ç†è«–33.8%) å‹ç‡74.3%  â”‚
â”‚  #2 ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B: 31.0% (ç†è«–33.8%) å‹ç‡68.9%  â”‚
â”‚  #3 ã‚µãƒ¼ãƒé­”æ³•C: 34.5% (ç†è«–33.8%) å‹ç‡71.2%  â”‚
â”‚  #4 ã‚«ãƒ¼ãƒ‰X+ã‚«ãƒ¼ãƒ‰Y: 6.8% (ç†è«–8.2%) å‹ç‡62.5%â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«

#### `deck_cards` ãƒ†ãƒ¼ãƒ–ãƒ«

ãƒ‡ãƒƒã‚­ã«å«ã¾ã‚Œã‚‹ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’ç®¡ç†ã—ã¾ã™ã€‚

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
| :--- | :--- | :--- | :--- |
| `id` | `Integer` | **Primary Key** | ã‚«ãƒ¼ãƒ‰ID |
| `deck_id` | `Integer` | **Foreign Key (decks.id) ON DELETE CASCADE**, **Not Null** | ãƒ‡ãƒƒã‚­ID |
| `card_name` | `String(255)` | **Not Null** | ã‚«ãƒ¼ãƒ‰å |
| `quantity` | `Integer` | **Not Null**, Default: `1` | æšæ•°ï¼ˆ1-3ï¼‰ |
| `card_type` | `String(20)` | Nullable | ã‚«ãƒ¼ãƒ‰ç¨®åˆ¥ï¼ˆMONSTER/SPELL/TRAPï¼‰ |
| `created_at` | `DateTime(timezone=True)` | **Not Null**, Default: `now()` | ä½œæˆæ—¥æ™‚ |
| `updated_at` | `DateTime(timezone=True)` | **Not Null**, Default: `now()` | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_deck_cards_deck_id` on `deck_id`
- `idx_deck_cards_card_name` on `card_name`

**åˆ¶ç´„:**
- `UNIQUE(deck_id, card_name)` - åŒä¸€ãƒ‡ãƒƒã‚­å†…ã§åŒåã‚«ãƒ¼ãƒ‰ã¯1ã‚¨ãƒ³ãƒˆãƒª

#### `duel_opening_hands` ãƒ†ãƒ¼ãƒ–ãƒ«

å¯¾æˆ¦æ™‚ã®åˆæ‰‹ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’ç®¡ç†ã—ã¾ã™ã€‚

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
| :--- | :--- | :--- | :--- |
| `id` | `Integer` | **Primary Key** | åˆæ‰‹ã‚«ãƒ¼ãƒ‰ID |
| `duel_id` | `Integer` | **Foreign Key (duels.id) ON DELETE CASCADE**, **Not Null**, **Unique** | å¯¾æˆ¦ID |
| `created_at` | `DateTime(timezone=True)` | **Not Null**, Default: `now()` | ä½œæˆæ—¥æ™‚ |

#### `opening_hand_cards` ãƒ†ãƒ¼ãƒ–ãƒ«

åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã®è©³ç´°ï¼ˆå¤šå¯¾å¤šã®ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰ã€‚

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
| :--- | :--- | :--- | :--- |
| `id` | `Integer` | **Primary Key** | ID |
| `opening_hand_id` | `Integer` | **Foreign Key (duel_opening_hands.id) ON DELETE CASCADE**, **Not Null** | åˆæ‰‹ã‚«ãƒ¼ãƒ‰ID |
| `deck_card_id` | `Integer` | **Foreign Key (deck_cards.id) ON DELETE CASCADE**, **Not Null** | ãƒ‡ãƒƒã‚­ã‚«ãƒ¼ãƒ‰ID |
| `created_at` | `DateTime(timezone=True)` | **Not Null**, Default: `now()` | ä½œæˆæ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_opening_hand_cards_hand_id` on `opening_hand_id`
- `idx_opening_hand_cards_deck_card_id` on `deck_card_id`

**åˆ¶ç´„:**
- `UNIQUE(opening_hand_id, deck_card_id)` - åŒä¸€åˆæ‰‹å†…ã§åŒã˜ã‚«ãƒ¼ãƒ‰ã¯1å›ã®ã¿

#### `starter_patterns` ãƒ†ãƒ¼ãƒ–ãƒ«

åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç®¡ç†ã—ã¾ã™ã€‚

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
| :--- | :--- | :--- | :--- |
| `id` | `Integer` | **Primary Key** | ãƒ‘ã‚¿ãƒ¼ãƒ³ID |
| `deck_id` | `Integer` | **Foreign Key (decks.id) ON DELETE CASCADE**, **Not Null** | ãƒ‡ãƒƒã‚­ID |
| `name` | `String(255)` | Nullable | ãƒ‘ã‚¿ãƒ¼ãƒ³åï¼ˆä»»æ„ã€è‡ªå‹•ç”Ÿæˆå¯ï¼‰ |
| `created_at` | `DateTime(timezone=True)` | **Not Null**, Default: `now()` | ä½œæˆæ—¥æ™‚ |
| `updated_at` | `DateTime(timezone=True)` | **Not Null**, Default: `now()` | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_starter_patterns_deck_id` on `deck_id`

#### `starter_pattern_cards` ãƒ†ãƒ¼ãƒ–ãƒ«

åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å«ã¾ã‚Œã‚‹ã‚«ãƒ¼ãƒ‰ã‚’ç®¡ç†ã—ã¾ã™ï¼ˆå¤šå¯¾å¤šã®ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰ã€‚

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
| :--- | :--- | :--- | :--- |
| `id` | `Integer` | **Primary Key** | ID |
| `pattern_id` | `Integer` | **Foreign Key (starter_patterns.id) ON DELETE CASCADE**, **Not Null** | ãƒ‘ã‚¿ãƒ¼ãƒ³ID |
| `deck_card_id` | `Integer` | **Foreign Key (deck_cards.id) ON DELETE CASCADE**, **Not Null** | ãƒ‡ãƒƒã‚­ã‚«ãƒ¼ãƒ‰ID |
| `position` | `Integer` | **Not Null**, Default: `1` | ã‚¹ãƒ­ãƒƒãƒˆä½ç½®ï¼ˆ1-3ï¼‰ |
| `created_at` | `DateTime(timezone=True)` | **Not Null**, Default: `now()` | ä½œæˆæ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_starter_pattern_cards_pattern_id` on `pattern_id`
- `idx_starter_pattern_cards_deck_card_id` on `deck_card_id`

**åˆ¶ç´„:**
- `UNIQUE(pattern_id, deck_card_id)` - åŒä¸€ãƒ‘ã‚¿ãƒ¼ãƒ³å†…ã§åŒã˜ã‚«ãƒ¼ãƒ‰ã¯1å›ã®ã¿
- `UNIQUE(pattern_id, position)` - åŒä¸€ãƒ‘ã‚¿ãƒ¼ãƒ³å†…ã§åŒã˜ä½ç½®ã¯1å›ã®ã¿
- `CHECK(position BETWEEN 1 AND 3)` - ä½ç½®ã¯1-3ã®ç¯„å›²

**è¨­è¨ˆæ€æƒ³:**
- **ãƒ‡ãƒ¼ã‚¿ã¯æ­£è¦åŒ–**: ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ã§æŸ”è»Ÿæ€§ã‚’ç¢ºä¿ï¼ˆå°†æ¥ã®æ‹¡å¼µã«å¯¾å¿œå¯èƒ½ï¼‰
- **UIã¯3ã‚¹ãƒ­ãƒƒãƒˆ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯3ã¤ã®ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ­ãƒƒãƒˆã¨ã—ã¦è¡¨ç¤º
- `position` ã‚«ãƒ©ãƒ ã§UIã®ã‚¹ãƒ­ãƒƒãƒˆä½ç½®ã‚’ç®¡ç†

### æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´

#### `users` ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã‚«ãƒ©ãƒ è¿½åŠ ï¼‰

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
| :--- | :--- | :--- | :--- |
| `deck_list_enabled` | `Boolean` | **Not Null**, Default: `False` | ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆæ©Ÿèƒ½ã®æœ‰åŠ¹/ç„¡åŠ¹ |

### ERå›³

```
users
  â”‚
  â”œâ”€1:Nâ”€â†’ decks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚         â”‚                                        â”‚
  â”‚         â”œâ”€1:Nâ”€â†’ deck_cards â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”
  â”‚         â”‚          â–²                             â”‚       â”‚
  â”‚         â”‚          â”‚                             â”‚       â”‚
  â”‚         â”‚          â”‚ (deck_card_id ã§å‚ç…§)       â”‚       â”‚
  â”‚         â”‚          â”‚                             â”‚       â”‚
  â”‚         â””â”€1:Nâ”€â†’ starter_patterns                 â”‚       â”‚
  â”‚                    â”‚                             â”‚       â”‚
  â”‚                    â””â”€1:Nâ”€â†’ starter_pattern_cardsâ”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                  â”‚       â”‚
  â””â”€1:Nâ”€â†’ duels                                      â”‚       â”‚
            â”‚                                        â”‚       â”‚
            â””â”€1:1â”€â†’ duel_opening_hands               â”‚       â”‚
                      â”‚                              â”‚       â”‚
                      â””â”€1:Nâ”€â†’ opening_hand_cards â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
                                  (deck_card_id ã§å‚ç…§)
```

**åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ§‹é€ ï¼ˆæ­£è¦åŒ– + 3ã‚¹ãƒ­ãƒƒãƒˆUIï¼‰:**
```
starter_patterns (1:N) starter_pattern_cards (N:1) deck_cards
      â”‚                         â”‚
      â””â”€â”€ name                 â”œâ”€â”€ deck_card_id
                               â””â”€â”€ position (1-3)

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: æ­£è¦åŒ–ã•ã‚ŒãŸä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 
UIã§ã®è¡¨ç¤º: position 1-3 ã‚’3ã‚¹ãƒ­ãƒƒãƒˆã¨ã—ã¦è¡¨ç¾

ãƒ‘ã‚¿ãƒ¼ãƒ³ç¨®åˆ¥ã®åˆ¤å®š:
  ã‚«ãƒ¼ãƒ‰1ä»¶      â†’ 1æšåˆå‹•
  ã‚«ãƒ¼ãƒ‰2ä»¶      â†’ 2æšåˆå‹•
  ã‚«ãƒ¼ãƒ‰3ä»¶      â†’ 3æšåˆå‹•
```

### å‰Šé™¤æ™‚ã®æŒ™å‹•ï¼ˆCASCADEï¼‰

| å‰Šé™¤å¯¾è±¡ | å½±éŸ¿ç¯„å›² |
| :--- | :--- |
| `deck` | â†’ `deck_cards` â†’ `opening_hand_cards`, `starter_pattern_cards` ãŒå‰Šé™¤ |
|        | â†’ `starter_patterns` â†’ `starter_pattern_cards` ãŒå‰Šé™¤ |
| `deck_card` | â†’ é–¢é€£ã™ã‚‹ `opening_hand_cards` ãŒå‰Šé™¤ |
|             | â†’ é–¢é€£ã™ã‚‹ `starter_pattern_cards` ãŒå‰Šé™¤ |
| `starter_pattern` | â†’ é–¢é€£ã™ã‚‹ `starter_pattern_cards` ãŒå‰Šé™¤ |
| `duel` | â†’ `duel_opening_hands` â†’ `opening_hand_cards` ãŒå‰Šé™¤ |

**æ³¨æ„:**
- `deck_card` å‰Šé™¤æ™‚ã€ãã®ã‚«ãƒ¼ãƒ‰ã‚’å«ã‚€åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ `starter_pattern_cards` ã®ã¿å‰Šé™¤ã•ã‚Œã€ãƒ‘ã‚¿ãƒ¼ãƒ³è‡ªä½“ã¯æ®‹ã‚‹
- ãƒ‘ã‚¿ãƒ¼ãƒ³å†…ã®å…¨ã‚«ãƒ¼ãƒ‰ãŒå‰Šé™¤ã•ã‚ŒãŸå ´åˆã€ç©ºã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ®‹ã‚‹ãŸã‚ã€å®šæœŸçš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã¾ãŸã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦

---

## APIè¨­è¨ˆ

### ãƒ‡ãƒƒã‚­ã‚«ãƒ¼ãƒ‰ç®¡ç†API

#### GET /decks/{deck_id}/cards

ãƒ‡ãƒƒã‚­ã«ç™»éŒ²ã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ä¸€è¦§ã‚’å–å¾—ã€‚

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "cards": [
    {
      "id": 1,
      "card_name": "å¢—æ®–ã™ã‚‹G",
      "quantity": 3,
      "card_type": "MONSTER"
    },
    {
      "id": 2,
      "card_name": "ç°æµã†ã‚‰ã‚‰",
      "quantity": 3,
      "card_type": "MONSTER"
    }
  ],
  "total_cards": 40
}
```

#### POST /decks/{deck_id}/cards

ãƒ‡ãƒƒã‚­ã«ã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "card_name": "å¢—æ®–ã™ã‚‹G",
  "quantity": 3,
  "card_type": "MONSTER"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "id": 1,
  "deck_id": 1,
  "card_name": "å¢—æ®–ã™ã‚‹G",
  "quantity": 3,
  "card_type": "MONSTER"
}
```

#### PUT /decks/{deck_id}/cards/{card_id}

ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’æ›´æ–°ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "quantity": 2,
  "card_type": "MONSTER"
}
```

#### DELETE /decks/{deck_id}/cards/{card_id}

ã‚«ãƒ¼ãƒ‰ã‚’ãƒ‡ãƒƒã‚­ã‹ã‚‰å‰Šé™¤ã€‚

#### POST /decks/{deck_id}/cards/bulk

è¤‡æ•°ã‚«ãƒ¼ãƒ‰ã‚’ä¸€æ‹¬è¿½åŠ ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "cards": [
    {"card_name": "å¢—æ®–ã™ã‚‹G", "quantity": 3, "card_type": "MONSTER"},
    {"card_name": "ç°æµã†ã‚‰ã‚‰", "quantity": 3, "card_type": "MONSTER"}
  ]
}
```

---

### åˆæ‰‹ã‚«ãƒ¼ãƒ‰è¨˜éŒ²API

#### POST /duelsï¼ˆæ‹¡å¼µï¼‰

å¯¾æˆ¦è¨˜éŒ²ä½œæˆæ™‚ã«åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã‚’å«ã‚ã‚‹ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆæ‹¡å¼µï¼‰:**
```json
{
  "deck_id": 1,
  "opponent_deck_id": 2,
  "result": true,
  "game_mode": "RANK",
  "coin": true,
  "first_or_second": true,
  "played_date": "2025-01-14T12:00:00Z",
  "opening_hand_card_ids": [1, 2, 5]
}
```

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³:**
- `opening_hand_card_ids` ã¯ `deck_cards.id` ã®é…åˆ—
- æŒ‡å®šã•ã‚ŒãŸ `deck_card_id` ãŒ `deck_id` ã«ç´ã¥ã„ã¦ã„ã‚‹ã‹æ¤œè¨¼
- æœ€å¤§5ä»¶ã¾ã§

#### GET /duels/{duel_id}/opening-hand

å¯¾æˆ¦ã®åˆæ‰‹ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’å–å¾—ã€‚

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "duel_id": 1,
  "cards": [
    {"deck_card_id": 1, "card_name": "å¢—æ®–ã™ã‚‹G"},
    {"deck_card_id": 2, "card_name": "ç°æµã†ã‚‰ã‚‰"},
    {"deck_card_id": 5, "card_name": "åŸå§‹ç”Ÿå‘½æ…‹ãƒ‹ãƒ“ãƒ«"}
  ]
}
```

---

### åˆæ‰‹ã‚«ãƒ¼ãƒ‰çµ±è¨ˆAPI

#### GET /statistics/opening-hand

åˆæ‰‹ã‚«ãƒ¼ãƒ‰åˆ¥ã®å‹ç‡çµ±è¨ˆã‚’å–å¾—ã€‚

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `deck_id`: ãƒ‡ãƒƒã‚­IDã§ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä»»æ„ï¼‰
- `period_type`: `monthly` | `recent` | `from_start`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `monthly`ï¼‰
- `year`: å¯¾è±¡å¹´ï¼ˆ`monthly`æ™‚å¿…é ˆï¼‰
- `month`: å¯¾è±¡æœˆï¼ˆ`monthly`æ™‚å¿…é ˆï¼‰
- `game_mode`: ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ã§ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä»»æ„ï¼‰
- `min_occurrences`: æœ€å°å‡ºç¾å›æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 3ï¼‰
- `sort_by`: `win_rate` | `occurrences` | `card_name`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `occurrences`ï¼‰
- `order`: `asc` | `desc`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `desc`ï¼‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "statistics": [
    {
      "card_name": "å¢—æ®–ã™ã‚‹G",
      "total_occurrences": 45,
      "total_wins": 29,
      "total_losses": 16,
      "win_rate": 64.4,
      "first_turn": {
        "occurrences": 25,
        "wins": 18,
        "win_rate": 72.0
      },
      "second_turn": {
        "occurrences": 20,
        "wins": 11,
        "win_rate": 55.0
      }
    }
  ],
  "total_duels_with_opening_hand": 120,
  "period": {
    "type": "monthly",
    "year": 2025,
    "month": 1
  }
}
```

#### GET /statistics/opening-hand/{card_name}/matchups

ç‰¹å®šã‚«ãƒ¼ãƒ‰ã®ç›¸æ‰‹ãƒ†ãƒ¼ãƒåˆ¥å‹ç‡ã‚’å–å¾—ã€‚

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `deck_id`: ãƒ‡ãƒƒã‚­IDã§ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä»»æ„ï¼‰
- `period_type`: æœŸé–“ã‚¿ã‚¤ãƒ—
- `year`: å¯¾è±¡å¹´
- `month`: å¯¾è±¡æœˆ
- `game_mode`: ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "card_name": "å¢—æ®–ã™ã‚‹G",
  "matchups": [
    {
      "opponent_deck_name": "ç›¸æ‰‹ãƒ‡ãƒƒã‚­A",
      "occurrences": 15,
      "wins": 12,
      "win_rate": 80.0,
      "first_turn_win_rate": 85.7,
      "second_turn_win_rate": 75.0
    },
    {
      "opponent_deck_name": "ç›¸æ‰‹ãƒ‡ãƒƒã‚­B",
      "occurrences": 10,
      "wins": 5,
      "win_rate": 50.0,
      "first_turn_win_rate": 60.0,
      "second_turn_win_rate": 40.0
    }
  ]
}
```

---

### åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ç®¡ç†API

#### GET /decks/{deck_id}/starter-patterns

ãƒ‡ãƒƒã‚­ã®åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ä¸€è¦§ã‚’å–å¾—ã€‚

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "patterns": [
    {
      "id": 1,
      "pattern_type": 1,
      "name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A",
      "cards": [
        {"position": 1, "deck_card_id": 1, "card_name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A", "quantity": 3}
      ]
    },
    {
      "id": 2,
      "pattern_type": 1,
      "name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B",
      "cards": [
        {"position": 1, "deck_card_id": 2, "card_name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B", "quantity": 3}
      ]
    },
    {
      "id": 3,
      "pattern_type": 2,
      "name": "ã‚«ãƒ¼ãƒ‰X + ã‚«ãƒ¼ãƒ‰Y",
      "cards": [
        {"position": 1, "deck_card_id": 4, "card_name": "ã‚«ãƒ¼ãƒ‰X", "quantity": 3},
        {"position": 2, "deck_card_id": 5, "card_name": "ã‚«ãƒ¼ãƒ‰Y", "quantity": 2}
      ]
    }
  ],
  "total_starter_cards": 14,
  "unique_starter_cards": 5
}
```

**pattern_type ã®ç®—å‡º:** `cards` é…åˆ—ã®ä»¶æ•°ã‹ã‚‰è‡ªå‹•ç®—å‡º

**UIå‘ã‘å¤‰æ›:**
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã¯ `cards` é…åˆ—ã‚’3ã‚¹ãƒ­ãƒƒãƒˆå½¢å¼ã«å¤‰æ›ã—ã¦è¡¨ç¤º:
```typescript
// cards é…åˆ—ã‚’3ã‚¹ãƒ­ãƒƒãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›
const slot1 = cards.find(c => c.position === 1) ?? null;
const slot2 = cards.find(c => c.position === 2) ?? null;
const slot3 = cards.find(c => c.position === 3) ?? null;
```

#### POST /decks/{deck_id}/starter-patterns

åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¿½åŠ ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "name": "ã‚«ãƒ¼ãƒ‰X + ã‚«ãƒ¼ãƒ‰Y",
  "cards": [
    {"position": 1, "deck_card_id": 4},
    {"position": 2, "deck_card_id": 5}
  ]
}
```

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³:**
- `cards` é…åˆ—ã¯1ã€œ3ä»¶
- `position` ã¯1ã‹ã‚‰é€£ç¶šã™ã‚‹å€¤ã§ã‚ã‚‹ã“ã¨
- æŒ‡å®šã•ã‚ŒãŸ `deck_card_id` ãŒ `deck_id` ã«ç´ã¥ã„ã¦ã„ã‚‹ã‹æ¤œè¨¼
- åŒä¸€ã‚«ãƒ¼ãƒ‰ã®é‡è¤‡æŒ‡å®šã¯ä¸å¯

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "id": 3,
  "pattern_type": 2,
  "name": "ã‚«ãƒ¼ãƒ‰X + ã‚«ãƒ¼ãƒ‰Y",
  "cards": [
    {"position": 1, "deck_card_id": 4, "card_name": "ã‚«ãƒ¼ãƒ‰X", "quantity": 3},
    {"position": 2, "deck_card_id": 5, "card_name": "ã‚«ãƒ¼ãƒ‰Y", "quantity": 2}
  ]
}
```

#### PUT /decks/{deck_id}/starter-patterns/{pattern_id}

åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ›´æ–°ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "name": "ã‚«ãƒ¼ãƒ‰X + ã‚«ãƒ¼ãƒ‰Y ã‚³ãƒ³ãƒœ",
  "cards": [
    {"position": 1, "deck_card_id": 4},
    {"position": 2, "deck_card_id": 5}
  ]
}
```

#### DELETE /decks/{deck_id}/starter-patterns/{pattern_id}

åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‰Šé™¤ã€‚

---

### åˆå‹•ç‡API

#### GET /decks/{deck_id}/starter-rate/theoretical

ç†è«–åˆå‹•ç‡ã‚’è¨ˆç®—ã—ã¦å–å¾—ï¼ˆãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½¿ç”¨ï¼‰ã€‚

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `simulations`: ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å›æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 10000ã€æœ€å¤§: 100000ï¼‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "deck_id": 1,
  "deck_name": "ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒƒã‚­",
  "total_cards": 40,
  "patterns": [
    {
      "id": 1,
      "pattern_type": 1,
      "name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A",
      "cards": [{"card_name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A", "quantity": 3}],
      "individual_rate": {
        "first_turn": 33.8,
        "second_turn": 39.4
      }
    },
    {
      "id": 2,
      "pattern_type": 1,
      "name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B",
      "cards": [{"card_name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B", "quantity": 3}],
      "individual_rate": {
        "first_turn": 33.8,
        "second_turn": 39.4
      }
    },
    {
      "id": 3,
      "pattern_type": 2,
      "name": "ã‚«ãƒ¼ãƒ‰X + ã‚«ãƒ¼ãƒ‰Y",
      "cards": [
        {"card_name": "ã‚«ãƒ¼ãƒ‰X", "quantity": 3},
        {"card_name": "ã‚«ãƒ¼ãƒ‰Y", "quantity": 2}
      ],
      "individual_rate": {
        "first_turn": 8.2,
        "second_turn": 11.5
      }
    }
  ],
  "unique_starter_cards": 12,
  "theoretical_rate": {
    "first_turn": 87.4,
    "second_turn": 91.2
  }
}
```

#### GET /decks/{deck_id}/starter-rate/actual

å®Ÿè³ªåˆå‹•ç‡ã‚’è¨ˆç®—ã—ã¦å–å¾—ã€‚è¨˜éŒ²ã•ã‚ŒãŸåˆæ‰‹ã‚«ãƒ¼ãƒ‰ãŒç™»éŒ²æ¸ˆã¿åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã„ãšã‚Œã‹ã‚’æº€ãŸã™ã‹åˆ¤å®šã€‚

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `period_type`: `monthly` | `recent` | `from_start`
- `year`: å¯¾è±¡å¹´
- `month`: å¯¾è±¡æœˆ
- `game_mode`: ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "deck_id": 1,
  "deck_name": "ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒƒã‚­",
  "period": {
    "type": "monthly",
    "year": 2025,
    "month": 1
  },
  "total_duels_with_opening_hand": 100,
  "theoretical_rate": {
    "first_turn": 87.4,
    "second_turn": 91.2
  },
  "actual_rate": {
    "first_turn": {
      "total": 55,
      "with_starter": 46,
      "rate": 83.6,
      "win_rate": 72.3
    },
    "second_turn": {
      "total": 45,
      "with_starter": 40,
      "rate": 88.9,
      "win_rate": 58.1
    }
  },
  "win_rate_comparison": {
    "with_starter": 68.2,
    "without_starter": 41.7,
    "difference": 26.5
  },
  "pattern_stats": [
    {
      "pattern_id": 1,
      "pattern_type": 1,
      "name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A",
      "cards": [{"card_name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A", "quantity": 3}],
      "theoretical_rate": 33.8,
      "actual_rate": 35.2,
      "occurrences": 35,
      "wins": 26,
      "win_rate": 74.3
    },
    {
      "pattern_id": 2,
      "pattern_type": 1,
      "name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B",
      "cards": [{"card_name": "ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B", "quantity": 3}],
      "theoretical_rate": 33.8,
      "actual_rate": 31.0,
      "occurrences": 31,
      "wins": 21,
      "win_rate": 68.9
    },
    {
      "pattern_id": 3,
      "pattern_type": 2,
      "name": "ã‚«ãƒ¼ãƒ‰X + ã‚«ãƒ¼ãƒ‰Y",
      "cards": [
        {"card_name": "ã‚«ãƒ¼ãƒ‰X", "quantity": 3},
        {"card_name": "ã‚«ãƒ¼ãƒ‰Y", "quantity": 2}
      ],
      "theoretical_rate": 8.2,
      "actual_rate": 6.8,
      "occurrences": 7,
      "wins": 5,
      "win_rate": 71.4
    }
  ]
}
```

**åˆå‹•æˆåŠŸã®åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯:**
1. å¯¾æˆ¦ã®åˆæ‰‹ã‚«ãƒ¼ãƒ‰ä¸€è¦§ã‚’å–å¾—
2. ç™»éŒ²æ¸ˆã¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒ«ãƒ¼ãƒ—ã§ç¢ºèª
3. ãƒ‘ã‚¿ãƒ¼ãƒ³å†…ã®å…¨ã‚«ãƒ¼ãƒ‰ãŒåˆæ‰‹ã«å«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
4. ã„ãšã‚Œã‹1ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæˆç«‹ã—ã¦ã„ã‚Œã°ã€Œåˆå‹•æˆåŠŸã€

---

## UIè¨­è¨ˆ

### ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®š                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ...æ—¢å­˜è¨­å®šï¼ˆãƒ†ãƒ¼ãƒã€é…ä¿¡è€…ãƒ¢ãƒ¼ãƒ‰ãªã©ï¼‰...     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ‹¡å¼µæ©Ÿèƒ½                                     â”‚
â”‚                                             â”‚
â”‚ ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆæ©Ÿèƒ½                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [OFF â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â— ON]             â”‚ â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚ ãƒ‡ãƒƒã‚­ã«ã‚«ãƒ¼ãƒ‰ã‚’ç™»éŒ²ã—ã¦ã€åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã”ã¨ã® â”‚ â”‚
â”‚ â”‚ å‹ç‡ã‚’åˆ†æã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚           â”‚ â”‚
â”‚ â”‚ â€» è©³ç´°ãªåˆ†æã‚’ã—ãŸã„æ–¹å‘ã‘ã®æ©Ÿèƒ½ã§ã™      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒƒã‚­è©³ç´°ç”»é¢ï¼ˆæ©Ÿèƒ½ONæ™‚ã®ã¿è¡¨ç¤ºï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ‡ãƒƒã‚­è©³ç´°: ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒƒã‚­                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [åŸºæœ¬æƒ…å ±] [ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ] [åˆå‹•ç‡] [çµ±è¨ˆ]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ (40æš)  åˆå‹•æœ­: 12æš             â”‚
â”‚                                             â”‚
â”‚ [ã‚«ãƒ¼ãƒ‰åã‚’å…¥åŠ›...] [æšæ•°: 1â–¼] [ç¨®åˆ¥: â”€â–¼] [+]â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”â”‚
â”‚ â”‚ ã‚«ãƒ¼ãƒ‰å          â”‚æšæ•°â”‚ ç¨®åˆ¥    â”‚åˆå‹•â”‚æ“ä½œâ”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚ ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A       â”‚ 3 â”‚ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼â”‚ â˜‘ â”‚ âœï¸ğŸ—‘â”‚â”‚
â”‚ â”‚ ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B       â”‚ 3 â”‚ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼â”‚ â˜‘ â”‚ âœï¸ğŸ—‘â”‚â”‚
â”‚ â”‚ ã‚µãƒ¼ãƒé­”æ³•C       â”‚ 3 â”‚é­”æ³•     â”‚ â˜‘ â”‚ âœï¸ğŸ—‘â”‚â”‚
â”‚ â”‚ å¢—æ®–ã™ã‚‹G         â”‚ 3 â”‚ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼â”‚ â–¡ â”‚ âœï¸ğŸ—‘â”‚â”‚
â”‚ â”‚ ç°æµã†ã‚‰ã‚‰        â”‚ 3 â”‚ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼â”‚ â–¡ â”‚ âœï¸ğŸ—‘â”‚â”‚
â”‚ â”‚ åŸå§‹ç”Ÿå‘½æ…‹ãƒ‹ãƒ“ãƒ«   â”‚ 2 â”‚ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼â”‚ â–¡ â”‚ âœï¸ğŸ—‘â”‚â”‚
â”‚ â”‚ ...               â”‚   â”‚         â”‚    â”‚    â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜â”‚
â”‚                                             â”‚
â”‚ [ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ] [ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆå‹•ç‡ã‚¿ãƒ–ï¼ˆãƒ‡ãƒƒã‚­è©³ç´°ç”»é¢å†…ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ‡ãƒƒã‚­è©³ç´°: ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒƒã‚­                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [åŸºæœ¬æƒ…å ±] [ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ] [åˆå‹•ç‡] [çµ±è¨ˆ]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆå‹•ç‡åˆ†æ                                   â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç†è«–åˆå‹•ç‡                               â”‚ â”‚
â”‚ â”‚ ãƒ‡ãƒƒã‚­: 40æš  åˆå‹•æœ­: 12æš               â”‚ â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚ å…ˆæ”»ï¼ˆ5æšãƒ‰ãƒ­ãƒ¼ï¼‰: 87.4%                 â”‚ â”‚
â”‚ â”‚ å¾Œæ”»ï¼ˆ6æšãƒ‰ãƒ­ãƒ¼ï¼‰: 91.2%                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ å®Ÿè³ªåˆå‹•ç‡ï¼ˆ2025å¹´1æœˆãƒ»100æˆ¦ï¼‰           â”‚ â”‚
â”‚ â”‚           â”‚ç†è«–å€¤â”‚å®Ÿè³ª â”‚å·®ç•°  â”‚å‹ç‡    â”‚ â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚ â”‚ å…ˆæ”»      â”‚87.4%â”‚84.0%â”‚-3.4%â”‚72.3%   â”‚ â”‚
â”‚ â”‚ å¾Œæ”»      â”‚91.2%â”‚88.5%â”‚-2.7%â”‚58.1%   â”‚ â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚ åˆå‹•æˆåŠŸæ™‚å‹ç‡: 68.2%                    â”‚ â”‚
â”‚ â”‚ åˆå‹•å¤±æ•—æ™‚å‹ç‡: 41.7%                    â”‚ â”‚
â”‚ â”‚ å‹ç‡å·®: +26.5%                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ åˆå‹•æœ­åˆ¥åˆ†æ                             â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚ â”‚ åˆå‹•æœ­        â”‚æšæ•°â”‚ç†è«–ç‡â”‚å®Ÿè³ªç‡â”‚å‹ç‡â”‚â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤â”‚ â”‚
â”‚ â”‚ â”‚ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A    â”‚ 3 â”‚33.8%â”‚35.2%â”‚74.3%â”‚â”‚ â”‚
â”‚ â”‚ â”‚ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B    â”‚ 3 â”‚33.8%â”‚31.0%â”‚68.9%â”‚â”‚ â”‚
â”‚ â”‚ â”‚ã‚µãƒ¼ãƒé­”æ³•C    â”‚ 3 â”‚33.8%â”‚34.5%â”‚71.2%â”‚â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¯¾æˆ¦å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 

**æ©Ÿèƒ½ON + ã‚«ãƒ¼ãƒ‰ç™»éŒ²æ¸ˆã¿ãƒ‡ãƒƒã‚­ã‚’é¸æŠã—ãŸå ´åˆ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¾æˆ¦è¨˜éŒ²                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä½¿ç”¨ãƒ‡ãƒƒã‚­: [ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒƒã‚­ â–¼]                 â”‚
â”‚ ç›¸æ‰‹ãƒ‡ãƒƒã‚­: [ç›¸æ‰‹ãƒ‡ãƒƒã‚­ â–¼]                     â”‚
â”‚ çµæœ: [å‹åˆ© â—‹] [æ•—åŒ— â—‹]                      â”‚
â”‚ å…ˆæ”»/å¾Œæ”»: [å…ˆæ”» â—‹] [å¾Œæ”» â—‹]                  â”‚
â”‚ ...                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆæ‰‹ã‚«ãƒ¼ãƒ‰ï¼ˆä»»æ„ãƒ»æœ€å¤§5æšï¼‰                    â”‚
â”‚                                             â”‚
â”‚ [ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠ â–¼]                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â–¡ ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A                           â”‚ â”‚
â”‚ â”‚ â˜‘ å¢—æ®–ã™ã‚‹G                             â”‚ â”‚
â”‚ â”‚ â˜‘ ç°æµã†ã‚‰ã‚‰                            â”‚ â”‚
â”‚ â”‚ â–¡ åŸå§‹ç”Ÿå‘½æ…‹ãƒ‹ãƒ“ãƒ«                       â”‚ â”‚
â”‚ â”‚ â–¡ å¢“ç©´ã®æŒ‡åè€…                          â”‚ â”‚
â”‚ â”‚ ...                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚ é¸æŠä¸­: [å¢—æ®–ã™ã‚‹G Ã—] [ç°æµã†ã‚‰ã‚‰ Ã—] [ã‚¯ãƒªã‚¢] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [è¨˜éŒ²ã™ã‚‹]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ©Ÿèƒ½ON + ã‚«ãƒ¼ãƒ‰æœªç™»éŒ²ãƒ‡ãƒƒã‚­ã‚’é¸æŠã—ãŸå ´åˆ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¾æˆ¦è¨˜éŒ²                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä½¿ç”¨ãƒ‡ãƒƒã‚­: [æ–°è¦ãƒ‡ãƒƒã‚­ â–¼]                    â”‚
â”‚ ç›¸æ‰‹ãƒ‡ãƒƒã‚­: [ç›¸æ‰‹ãƒ‡ãƒƒã‚­ â–¼]                     â”‚
â”‚ çµæœ: [å‹åˆ© â—‹] [æ•—åŒ— â—‹]                      â”‚
â”‚ å…ˆæ”»/å¾Œæ”»: [å…ˆæ”» â—‹] [å¾Œæ”» â—‹]                  â”‚
â”‚ ...                                         â”‚
â”‚                                             â”‚
â”‚ â€»åˆæ‰‹ã‚«ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’ä½¿ã†ã«ã¯ãƒ‡ãƒƒã‚­ã«ã‚«ãƒ¼ãƒ‰ã‚’     â”‚
â”‚   ç™»éŒ²ã—ã¦ãã ã•ã„ [ãƒ‡ãƒƒã‚­è¨­å®šã¸â†’]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [è¨˜éŒ²ã™ã‚‹]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ©Ÿèƒ½OFF ã®å ´åˆ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¾æˆ¦è¨˜éŒ²                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä½¿ç”¨ãƒ‡ãƒƒã‚­: [ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒƒã‚­ â–¼]                 â”‚
â”‚ ç›¸æ‰‹ãƒ‡ãƒƒã‚­: [ç›¸æ‰‹ãƒ‡ãƒƒã‚­ â–¼]                     â”‚
â”‚ çµæœ: [å‹åˆ© â—‹] [æ•—åŒ— â—‹]                      â”‚
â”‚ å…ˆæ”»/å¾Œæ”»: [å…ˆæ”» â—‹] [å¾Œæ”» â—‹]                  â”‚
â”‚ ...                                         â”‚
â”‚                                             â”‚
â”‚ ï¼ˆåˆæ‰‹ã‚«ãƒ¼ãƒ‰æ¬„ã¯è¡¨ç¤ºã•ã‚Œãªã„ï¼‰                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [è¨˜éŒ²ã™ã‚‹]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆæ‰‹ã‚«ãƒ¼ãƒ‰çµ±è¨ˆç”»é¢ï¼ˆæ©Ÿèƒ½ONæ™‚ã®ã¿ã€Œåˆæ‰‹ã‚«ãƒ¼ãƒ‰ã€ã‚¿ãƒ–è¡¨ç¤ºï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çµ±è¨ˆæƒ…å ±                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ç·åˆ] [ãƒ‡ãƒƒã‚­åˆ¥] [ç›¸æ‰‹åˆ¥] [åˆæ‰‹ã‚«ãƒ¼ãƒ‰]        â”‚
â”‚                        â†‘ æ©Ÿèƒ½ONæ™‚ã®ã¿è¡¨ç¤º     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆæ‰‹ã‚«ãƒ¼ãƒ‰åˆ¥å‹ç‡                              â”‚
â”‚                                             â”‚
â”‚ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼:                                   â”‚
â”‚ ãƒ‡ãƒƒã‚­: [ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒƒã‚­ â–¼] æœŸé–“: [2025å¹´1æœˆ â–¼]â”‚
â”‚ ãƒ¢ãƒ¼ãƒ‰: [å…¨ã¦ â–¼]  æœ€å°å‡ºç¾: [3å›ä»¥ä¸Š â–¼]       â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ ã‚«ãƒ¼ãƒ‰å      â”‚ å‡ºç¾â”‚ å…ˆæ”»å‹ç‡â”‚ å¾Œæ”»å‹ç‡â”‚ ç·åˆ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ å¢—æ®–ã™ã‚‹G     â”‚ 45  â”‚ 72.0%  â”‚ 55.0%  â”‚ 64.4%â”‚
â”‚ â”‚ ç°æµã†ã‚‰ã‚‰    â”‚ 52  â”‚ 68.8%  â”‚ 61.5%  â”‚ 65.4%â”‚
â”‚ â”‚ åŸå§‹ç”Ÿå‘½æ…‹ãƒ‹ãƒ“ãƒ«â”‚ 28 â”‚ 57.1%  â”‚ 71.4%  â”‚ 64.3%â”‚
â”‚ â”‚ å¢“ç©´ã®æŒ‡åè€…   â”‚ 35  â”‚ 74.3%  â”‚ 52.9%  â”‚ 62.9%â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
â”‚                                             â”‚
â”‚ â€»ã‚«ãƒ¼ãƒ‰åã‚’ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°ã‚’è¡¨ç¤º               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆæ‰‹ã‚«ãƒ¼ãƒ‰è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¢—æ®–ã™ã‚‹G ã®è©³ç´°çµ±è¨ˆ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç·åˆå‹ç‡: 64.4% (29å‹/45æˆ¦)                  â”‚
â”‚                                             â”‚
â”‚ â–  å…ˆæ”»/å¾Œæ”»åˆ¥                                â”‚
â”‚   å…ˆæ”»æ™‚: 72.0% (18å‹/25æˆ¦)                  â”‚
â”‚   å¾Œæ”»æ™‚: 55.0% (11å‹/20æˆ¦)                  â”‚
â”‚   å·®: +17.0%ï¼ˆå…ˆæ”»æœ‰åˆ©ï¼‰                      â”‚
â”‚                                             â”‚
â”‚ â–  ç›¸æ‰‹ãƒ†ãƒ¼ãƒåˆ¥å‹ç‡                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ç›¸æ‰‹ãƒ†ãƒ¼ãƒ  â”‚å¯¾æˆ¦æ•°â”‚ å‹ç‡ â”‚å…ˆæ”»å‹ç‡â”‚å¾Œæ”»å‹ç‡â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ ç›¸æ‰‹ãƒ‡ãƒƒã‚­A â”‚ 15  â”‚ 80.0%â”‚ 85.7%â”‚ 75.0%â”‚   â”‚
â”‚ â”‚ ç›¸æ‰‹ãƒ‡ãƒƒã‚­B â”‚ 10  â”‚ 50.0%â”‚ 60.0%â”‚ 40.0%â”‚   â”‚
â”‚ â”‚ ç›¸æ‰‹ãƒ‡ãƒƒã‚­C â”‚ 8   â”‚ 62.5%â”‚ 75.0%â”‚ 50.0%â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚ [é–‰ã˜ã‚‹]                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```
src/
â”œâ”€â”€ views/
â”‚   â””â”€â”€ StatisticsView.vueï¼ˆæ‹¡å¼µï¼‰
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ decks/
â”‚   â”‚   â”œâ”€â”€ DeckCardList.vue              # ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆè¡¨ç¤º
â”‚   â”‚   â”œâ”€â”€ DeckCardForm.vue              # ã‚«ãƒ¼ãƒ‰è¿½åŠ /ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â”‚   â”œâ”€â”€ DeckCardImportDialog.vue      # ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”‚   â”œâ”€â”€ DeckCardRow.vue               # ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆè¡Œ
â”‚   â”‚   â”œâ”€â”€ StarterPatternTab.vue         # åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³è¨­å®šã‚¿ãƒ–
â”‚   â”‚   â”œâ”€â”€ StarterPatternList.vue        # åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ StarterPatternItem.vue        # åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³è¡Œ
â”‚   â”‚   â”œâ”€â”€ StarterPatternAddDialog.vue   # åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”‚   â”œâ”€â”€ StarterRateTab.vue            # åˆå‹•ç‡ã‚¿ãƒ–
â”‚   â”‚   â””â”€â”€ StarterRateCard.vue           # åˆå‹•ç‡ã‚«ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ duels/
â”‚   â”‚   â””â”€â”€ OpeningHandSelector.vue       # åˆæ‰‹ã‚«ãƒ¼ãƒ‰é¸æŠ
â”‚   â””â”€â”€ statistics/
â”‚       â”œâ”€â”€ OpeningHandStats.vue          # åˆæ‰‹ã‚«ãƒ¼ãƒ‰çµ±è¨ˆã‚¿ãƒ–
â”‚       â”œâ”€â”€ OpeningHandTable.vue          # åˆæ‰‹ã‚«ãƒ¼ãƒ‰çµ±è¨ˆãƒ†ãƒ¼ãƒ–ãƒ«
â”‚       â””â”€â”€ OpeningHandDetailDialog.vue   # è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ deckCards.ts                      # ãƒ‡ãƒƒã‚­ã‚«ãƒ¼ãƒ‰çŠ¶æ…‹ç®¡ç†
â”‚   â””â”€â”€ starterPatterns.ts                # åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³çŠ¶æ…‹ç®¡ç†
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ starterRateCalculator.ts          # ç†è«–åˆå‹•ç‡è¨ˆç®—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â””â”€â”€ services/
    â””â”€â”€ api.tsï¼ˆæ‹¡å¼µï¼‰                    # APIå‘¼ã³å‡ºã—
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

```
backend/app/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ deck_card.py                  # DeckCardãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ duel_opening_hand.py          # DuelOpeningHandãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ opening_hand_card.py          # OpeningHandCardãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ starter_pattern.py            # StarterPatternãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ starter_pattern_card.py       # StarterPatternCardãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€ schemas/
â”‚   â”œâ”€â”€ deck_card.py                  # ãƒ‡ãƒƒã‚­ã‚«ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”œâ”€â”€ opening_hand.py               # åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”œâ”€â”€ starter_pattern.py            # åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â””â”€â”€ starter_rate.py               # åˆå‹•ç‡ã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ deck_card_service.py          # ãƒ‡ãƒƒã‚­ã‚«ãƒ¼ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ opening_hand_stats_service.py # åˆæ‰‹ã‚«ãƒ¼ãƒ‰çµ±è¨ˆã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ starter_pattern_service.py    # åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â””â”€â”€ starter_rate_service.py       # åˆå‹•ç‡è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­å®Ÿè£…ï¼‰
â””â”€â”€ api/routers/
    â”œâ”€â”€ deck_cards.py                 # ãƒ‡ãƒƒã‚­ã‚«ãƒ¼ãƒ‰API
    â”œâ”€â”€ starter_patterns.py           # åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³API
    â”œâ”€â”€ starter_rate.py               # åˆå‹•ç‡API
    â””â”€â”€ statistics.pyï¼ˆæ‹¡å¼µï¼‰         # çµ±è¨ˆAPI
```

**åˆå‹•ç‡è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè£…æ–¹é‡ï¼ˆæ•°å¼ãƒ™ãƒ¼ã‚¹ï¼‰:**
```python
# starter_rate_service.py
from math import comb
from typing import List, Dict
from itertools import combinations

def calc_single_card_prob(deck_size: int, copies: int, hand_size: int) -> float:
    """1æšåˆå‹•ã®ç¢ºç‡: 1 - C(N-k,n)/C(N,n)"""
    if copies == 0:
        return 0.0
    return 1 - comb(deck_size - copies, hand_size) / comb(deck_size, hand_size)

def calc_combo_prob(deck_size: int, card_copies: List[int], hand_size: int) -> float:
    """
    è¤‡æ•°ã‚«ãƒ¼ãƒ‰ã®çµ„ã¿åˆã‚ã›åˆå‹•ã®ç¢ºç‡ï¼ˆåŒ…é™¤åŸç†ï¼‰
    card_copies: å„ã‚«ãƒ¼ãƒ‰ã®æ¡ç”¨æšæ•°ãƒªã‚¹ãƒˆ [a, b] or [a, b, c]
    """
    n = len(card_copies)
    total = sum(card_copies)

    # å…¨ã‚«ãƒ¼ãƒ‰ã‚’å¼•ãç¢ºç‡ = 1 - (ã„ãšã‚Œã‹1ç¨®é¡ä»¥ä¸Šã‚’å¼•ã‹ãªã„ç¢ºç‡)
    result = 0.0
    for i in range(1, n + 1):
        sign = (-1) ** (i + 1)
        for subset in combinations(range(n), i):
            missing_copies = sum(card_copies[j] for j in subset)
            remaining = deck_size - missing_copies
            if remaining >= hand_size:
                prob = comb(remaining, hand_size) / comb(deck_size, hand_size)
                result += sign * prob

    return 1 - result if result < 1 else result

def calc_starter_rate(
    deck_size: int,
    patterns: List[Dict],  # [{card_copies: [3]}, {card_copies: [3, 2]}, ...]
    hand_size: int
) -> float:
    """
    è¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆå‹•ç‡ã‚’åŒ…é™¤åŸç†ã§è¨ˆç®—
    ã„ãšã‚Œã‹1ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæˆç«‹ã™ã‚‹ç¢ºç‡
    """
    n = len(patterns)
    if n == 0:
        return 0.0

    # å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å€‹åˆ¥ç¢ºç‡
    pattern_probs = []
    for p in patterns:
        if len(p['card_copies']) == 1:
            prob = calc_single_card_prob(deck_size, p['card_copies'][0], hand_size)
        else:
            prob = calc_combo_prob(deck_size, p['card_copies'], hand_size)
        pattern_probs.append(prob)

    # åŒ…é™¤åŸç†ã§åˆæˆ
    # P(P1 âˆª P2 âˆª ...) = Î£P(Pi) - Î£P(Piâˆ©Pj) + Î£P(Piâˆ©Pjâˆ©Pk) - ...
    result = 0.0
    for i in range(1, n + 1):
        sign = (-1) ** (i + 1)
        for subset in combinations(range(n), i):
            # è¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŒæ™‚æˆç«‹ç¢ºç‡
            # = å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¿…è¦ãªã‚«ãƒ¼ãƒ‰ã‚’å…¨ã¦å¼•ãç¢ºç‡
            combined_copies = []
            for idx in subset:
                combined_copies.extend(patterns[idx]['card_copies'])

            if len(combined_copies) == 1:
                prob = calc_single_card_prob(deck_size, combined_copies[0], hand_size)
            else:
                prob = calc_combo_prob(deck_size, combined_copies, hand_size)

            result += sign * prob

    return result * 100  # ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆè¡¨è¨˜

# ä½¿ç”¨ä¾‹
patterns = [
    {'card_copies': [3]},      # ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰A Ã—3
    {'card_copies': [3]},      # ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰B Ã—3
    {'card_copies': [3]},      # ã‚µãƒ¼ãƒé­”æ³•C Ã—3
    {'card_copies': [3, 2]},   # ã‚«ãƒ¼ãƒ‰XÃ—3 + ã‚«ãƒ¼ãƒ‰YÃ—2
]
rate = calc_starter_rate(40, patterns, 5)  # å…ˆæ”»5æšãƒ‰ãƒ­ãƒ¼
print(f"åˆå‹•ç‡: {rate:.1f}%")
```

**æ³¨æ„ç‚¹:**
- åŒä¸€ã‚«ãƒ¼ãƒ‰ãŒè¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å«ã¾ã‚Œã‚‹å ´åˆã€åŒ…é™¤åŸç†ã®è¨ˆç®—ã§é‡è¤‡ã‚’æ­£ã—ãæ‰±ã†å¿…è¦ãŒã‚ã‚‹
- ãƒ‘ã‚¿ãƒ¼ãƒ³æ•°ãŒå¤šã„å ´åˆï¼ˆ10ä»¥ä¸Šï¼‰ã€è¨ˆç®—é‡ãŒæŒ‡æ•°é–¢æ•°çš„ã«å¢—åŠ ã™ã‚‹ãŸã‚ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚„è¿‘ä¼¼è¨ˆç®—ã‚’æ¤œè¨

---

## æŠ€è¡“çš„è€ƒæ…®äº‹é …

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- **çµ±è¨ˆã‚¯ã‚¨ãƒªæœ€é©åŒ–:**
  - åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã¨å¯¾æˆ¦çµæœã®é›†è¨ˆã¯è¤‡é›‘ãªJOINãŒç™ºç”Ÿ
  - é©åˆ‡ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆãŒå¿…é ˆ
  - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹ã®æ¤œè¨ï¼ˆç‰¹ã«æœˆæ¬¡çµ±è¨ˆï¼‰

- **ãƒ‡ãƒ¼ã‚¿é‡ã®è¦‹ç©ã‚‚ã‚Š:**
  - 1ãƒ¦ãƒ¼ã‚¶ãƒ¼ Ã— 5ãƒ‡ãƒƒã‚­ Ã— 40ã‚«ãƒ¼ãƒ‰ = 200ãƒ¬ã‚³ãƒ¼ãƒ‰/ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆdeck_cardsï¼‰
  - 1å¯¾æˆ¦ Ã— 5åˆæ‰‹ã‚«ãƒ¼ãƒ‰ = 5ãƒ¬ã‚³ãƒ¼ãƒ‰/å¯¾æˆ¦ï¼ˆopening_hand_cardsï¼‰

### ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§

- **å¤–éƒ¨ã‚­ãƒ¼ã«ã‚ˆã‚‹å‚ç…§æ•´åˆæ€§:**
  - `opening_hand_cards.deck_card_id` ã¯ `deck_cards.id` ã‚’å‚ç…§
  - ãƒªã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã‹ã‚‰ã®é¸æŠã®ã¿è¨±å¯ã™ã‚‹ãŸã‚ã€å­˜åœ¨ã—ãªã„ã‚«ãƒ¼ãƒ‰ã¯ç™»éŒ²ä¸å¯
  - ã‚«ãƒ¼ãƒ‰å‰Šé™¤æ™‚ã¯é–¢é€£ã™ã‚‹åˆæ‰‹ã‚«ãƒ¼ãƒ‰è¨˜éŒ²ã‚‚è‡ªå‹•å‰Šé™¤ï¼ˆCASCADEï¼‰

- **ã‚«ãƒ¼ãƒ‰åã®æ­£è¦åŒ–:**
  - ã‚«ãƒ¼ãƒ‰åã®è¡¨è¨˜ã‚†ã‚Œå¯¾ç­–ï¼ˆå…¨è§’/åŠè§’ã€ã‚¹ãƒšãƒ¼ã‚¹ï¼‰
  - å°†æ¥çš„ã«ã¯ã‚«ãƒ¼ãƒ‰ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã®é€£æºã‚’æ¤œè¨

- **å‰Šé™¤æ™‚ã®æŒ™å‹•:**
  - ãƒ‡ãƒƒã‚­å‰Šé™¤æ™‚: `deck_cards` â†’ `opening_hand_cards` ãŒ CASCADEå‰Šé™¤
  - ã‚«ãƒ¼ãƒ‰å‰Šé™¤æ™‚: é–¢é€£ã™ã‚‹ `opening_hand_cards` ãŒ CASCADEå‰Šé™¤
  - å¯¾æˆ¦å‰Šé™¤æ™‚: `duel_opening_hands` â†’ `opening_hand_cards` ãŒ CASCADEå‰Šé™¤

### æ‹¡å¼µæ€§

- **ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æºï¼ˆå°†æ¥ï¼‰:**
  - Yu-Gi-Oh! APIç­‰ã¨ã®é€£æºã§ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆå¼·åŒ–
  - ã‚«ãƒ¼ãƒ‰ç”»åƒè¡¨ç¤º

- **é«˜åº¦ãªåˆ†æï¼ˆå°†æ¥ï¼‰:**
  - è¤‡æ•°ã‚«ãƒ¼ãƒ‰ã®çµ„ã¿åˆã‚ã›åˆ†æ
  - æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹å‹æ•—äºˆæ¸¬

---

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤æ§‹ç¯‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒä½œæˆï¼ˆãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
  - `users.deck_list_enabled` ã‚«ãƒ©ãƒ è¿½åŠ 
  - `deck_cards` ãƒ†ãƒ¼ãƒ–ãƒ«
  - `duel_opening_hands` ãƒ†ãƒ¼ãƒ–ãƒ«
  - `opening_hand_cards` ãƒ†ãƒ¼ãƒ–ãƒ«
  - `starter_patterns` ãƒ†ãƒ¼ãƒ–ãƒ«
  - `starter_pattern_cards` ãƒ†ãƒ¼ãƒ–ãƒ«
- åŸºæœ¬ãƒ¢ãƒ‡ãƒ«ã¨ã‚¹ã‚­ãƒ¼ãƒã®å®Ÿè£…
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šç”»é¢ã«ON/OFFãƒˆã‚°ãƒ«è¿½åŠ 

### ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ‡ãƒƒã‚­ã‚«ãƒ¼ãƒ‰ç®¡ç†
- ãƒ‡ãƒƒã‚­ã‚«ãƒ¼ãƒ‰CRUD APIå®Ÿè£…
- ãƒ‡ãƒƒã‚­è©³ç´°ç”»é¢ã¸ã®ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆUIè¿½åŠ 
- ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

### ãƒ•ã‚§ãƒ¼ã‚º3: åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ç®¡ç†
- åˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³CRUD APIå®Ÿè£…
- ãƒ‡ãƒƒã‚­è©³ç´°ç”»é¢ã¸ã®ã€Œåˆå‹•è¨­å®šã€ã‚¿ãƒ–è¿½åŠ 
- 3ã‚¹ãƒ­ãƒƒãƒˆå½¢å¼ã®ãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- ãƒ‘ã‚¿ãƒ¼ãƒ³ä¸€è¦§è¡¨ç¤ºï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ï¼‰

### ãƒ•ã‚§ãƒ¼ã‚º4: åˆå‹•ç‡è¨ˆç®—ï¼ˆã‚¢ãƒ‰ãƒãƒ³ã‚¹æ©Ÿèƒ½ï¼‰
- ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ç†è«–åˆå‹•ç‡è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- åˆå‹•ç‡APIå®Ÿè£…
- ãƒ‡ãƒƒã‚­è©³ç´°ç”»é¢ã¸ã®åˆå‹•ç‡ã‚¿ãƒ–è¿½åŠ 
- ç†è«–åˆå‹•ç‡è¡¨ç¤ºUIï¼ˆãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥æˆç«‹ç‡å«ã‚€ï¼‰

### ãƒ•ã‚§ãƒ¼ã‚º5: åˆæ‰‹ã‚«ãƒ¼ãƒ‰è¨˜éŒ²
- å¯¾æˆ¦å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã¸ã®åˆæ‰‹ã‚«ãƒ¼ãƒ‰é¸æŠãƒªã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹è¿½åŠ 
- ãƒ‡ãƒƒã‚­ã®ã‚«ãƒ¼ãƒ‰ç™»éŒ²æœ‰ç„¡ã«ã‚ˆã‚‹è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
- å¯¾æˆ¦APIæ‹¡å¼µï¼ˆåˆæ‰‹ã‚«ãƒ¼ãƒ‰ä¿å­˜ï¼‰
- æ—¢å­˜å¯¾æˆ¦ã®åˆæ‰‹ã‚«ãƒ¼ãƒ‰ç·¨é›†æ©Ÿèƒ½

### ãƒ•ã‚§ãƒ¼ã‚º6: çµ±è¨ˆæ©Ÿèƒ½
- åˆæ‰‹ã‚«ãƒ¼ãƒ‰çµ±è¨ˆAPIå®Ÿè£…
- çµ±è¨ˆç”»é¢ã¸ã®åˆæ‰‹ã‚«ãƒ¼ãƒ‰ã‚¿ãƒ–è¿½åŠ 
- è©³ç´°åˆ†æãƒ¢ãƒ¼ãƒ€ãƒ«å®Ÿè£…
- å®Ÿè³ªåˆå‹•ç‡è¨ˆç®—ãƒ»è¡¨ç¤ºæ©Ÿèƒ½ï¼ˆåˆå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã®åˆ¤å®šï¼‰
- åˆå‹•æˆåŠŸ/å¤±æ•—æ™‚ã®å‹ç‡æ¯”è¼ƒ
- ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ã®æˆç«‹ç‡ã¨å‹ç‡åˆ†æ

---

## å‚è€ƒãƒªãƒ³ã‚¯

- [ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](./backend-architecture.md)
- [ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](./frontend-architecture.md)
- [DBã‚¹ã‚­ãƒ¼ãƒ](./db-schema.md)
- [API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](../api/api-reference.md)
